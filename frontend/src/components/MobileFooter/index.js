import React from "react";
import Link from "next/link";
import { useRouter } from "next/router";
import { useState } from "react";
import Login from "../UserLogin/Login";

const mobileFooterData = [
  {
    title: "Home",
    link: "/",
    icon: (
      <svg
        width="24"
        fill="#FF6E04"
        version="1.1"
        id="Capa_1"
        xmlns="http://www.w3.org/2000/svg"
        xmlnsXlink="http://www.w3.org/1999/xlink"
        viewBox="0 0 495.398 495.398"
        xmlSpace="preserve"
        stroke="#FF6E04"
      >
        <g id="SVGRepo_bgCarrier" strokeWidth="0"></g>

        <g
          id="SVGRepo_tracerCarrier"
          strokeLinecap="round"
          strokeLinejoin="round"
        ></g>

        <g id="SVGRepo_iconCarrier">
          <path d="M487.083,225.514l-75.08-75.08V63.704c0-15.682-12.708-28.391-28.413-28.391c-15.669,0-28.377,12.709-28.377,28.391v29.941L299.31,37.74c-27.639-27.624-75.694-27.575-103.27,0.05L8.312,225.514c-11.082,11.104-11.082,29.071,0,40.158c11.087,11.101,29.089,11.101,40.172,0l187.71-187.729c6.115-6.083,16.893-6.083,22.976-0.018l187.742,187.747c5.567,5.551,12.825,8.312,20.081,8.312c7.271,0,14.541-2.764,20.091-8.312C498.17,254.586,498.17,236.619,487.083,225.514z" />

          <path d="M257.561,131.836c-5.454-5.451-14.285-5.451-19.723,0L72.712,296.913c-2.607,2.606-4.085,6.164-4.085,9.877v120.401c0,28.253,22.908,51.16,51.16,51.16h81.754v-126.61h92.299v126.61h81.755c28.251,0,51.159-22.907,51.159-51.159V306.79c0-3.713-1.465-7.271-4.085-9.877L257.561,131.836z" />
        </g>
      </svg>
    ),
  },
  {
    title: "Dashboard",
    link: "/dashboard",
    icon: (
      <svg
        width="24"
        height="21"
        viewBox="0 0 800 604"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          fill-rule="evenodd"
          clip-rule="evenodd"
          d="M400 0C620.565 0 800 179.482 800 400C800 432.141 796.282 463.812 788.941 494.117L784.565 512.094H551.153C539.859 543.294 517.882 570.777 486.353 587.53C466.4 598.023 444 603.623 421.506 603.623C370.07 603.623 323.153 575.435 299.106 530.023C296.659 525.365 294.165 519.294 291.67 512.094H15.4354L11.0588 494.117C3.7175 463.812 0 432.142 0 400C0 179.482 179.435 0 400 0ZM470.071 512.094C489.929 491.53 495.577 459.953 481.459 433.318C463.859 400.188 313.223 260.988 313.223 260.988C313.223 260.988 343.906 463.812 361.459 496.941C364.517 502.73 368.517 507.577 372.8 512.094H372.423C373.27 512.988 374.306 513.6 375.153 514.4C377.082 516.235 379.059 517.929 381.13 519.482C382.682 520.659 384.33 521.694 385.93 522.682C388.094 524 390.259 525.223 392.565 526.353C394.353 527.153 396.141 527.906 398.023 528.612C400.282 529.412 402.588 530.165 404.988 530.73C406.944 531.243 408.923 531.667 410.918 532C413.318 532.377 415.67 532.612 418.07 532.706C419.247 532.753 420.377 533.035 421.506 533.035C422.306 533.035 423.106 532.753 423.906 532.753C427.341 532.659 430.73 532.188 434.117 531.53C435.67 531.2 437.27 531.059 438.823 530.635C443.717 529.318 448.517 527.623 453.13 525.13H453.27V525.082C459.812 521.647 465.223 517.082 470.07 512.094H470.071ZM620.706 251.341L667.67 204.377L617.788 154.447L570.777 201.412L620.706 251.341ZM364.706 145.318H435.294V78.8708H364.706V145.318ZM179.294 251.342L229.223 201.413L182.259 154.447L132.33 204.377L179.294 251.342Z"
          fill="#FF6E04"
        />
      </svg>
    ),
  },
  {
    title: "MarketPlace",
    link: "/listings/marketplace",
    icon: (
      <svg
        width="24"
        height="22"
        viewBox="0 0 600 600"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          fill-rule="evenodd"
          clip-rule="evenodd"
          d="M54.387 0C48.0902 0 42.4637 4.36984 40.3002 10.9403L1.82633 127.787C0.618167 131.457 0 135.332 0 139.24V185.715C0 212.013 19.1878 233.333 42.8572 233.333C66.5265 233.333 85.715 212.013 85.715 185.715C85.715 212.013 104.902 233.333 128.572 233.333C152.24 233.333 171.428 212.013 171.428 185.715C171.428 212.013 190.617 233.333 214.285 233.333C237.943 233.333 257.123 212.035 257.143 185.753C257.162 212.035 276.342 233.333 300 233.333C323.67 233.333 342.857 212.013 342.857 185.715C342.857 212.013 362.045 233.333 385.715 233.333C409.372 233.333 428.552 212.035 428.572 185.753C428.59 212.035 447.772 233.333 471.428 233.333C495.098 233.333 514.285 212.013 514.285 185.715C514.285 212.013 533.473 233.333 557.143 233.333C580.812 233.333 600 212.013 600 185.715V139.24C600 135.332 599.382 131.457 598.173 127.787L559.7 10.9403C557.537 4.36967 551.91 0 545.613 0H54.387Z"
          fill="#FF6E04"
        />
        <path
          fill-rule="evenodd"
          clip-rule="evenodd"
          d="M50.0003 257.951V366.666H25.0003C20.398 366.666 16.667 370.398 16.667 374.999V391.666C16.667 396.268 20.398 399.999 25.0003 399.999H575C579.602 399.999 583.334 396.268 583.334 391.666V374.999C583.334 370.398 579.602 366.666 575 366.666H550V257.951C537.277 256.578 525.97 251.568 516.667 244.109V366.666H83.3337V244.109C74.0303 251.568 62.7237 256.578 50.0003 257.951ZM524.574 216.666C526.194 218.768 527.975 220.711 529.897 222.473C535.562 227.661 542.445 231.266 550 232.674V216.666H524.574ZM50.0003 232.674V216.666H75.427C73.807 218.768 72.0253 220.711 70.1036 222.473C64.4393 227.661 57.555 231.266 50.0003 232.674ZM41.667 416.666C37.0647 416.666 33.3337 420.398 33.3337 424.999V583.333C33.3337 592.538 40.7957 599.999 50.0003 599.999H550C559.205 599.999 566.667 592.538 566.667 583.333V424.999C566.667 420.398 562.935 416.666 558.334 416.666H41.667Z"
          fill="#FF6E04"
        />
        <path
          d="M100 324.999C100 320.398 103.732 316.666 108.333 316.666H158.333C162.935 316.666 166.667 320.398 166.667 324.999V358.333C166.667 362.934 162.935 366.666 158.333 366.666H108.333C103.732 366.666 100 362.934 100 358.333V324.999Z"
          fill="#FF6E04"
        />
        <path
          d="M133.333 341.667C133.333 337.066 137.065 333.334 141.666 333.334H191.666C196.268 333.334 200 337.066 200 341.667V358.334C200 362.936 196.268 366.667 191.666 366.667H141.666C137.065 366.667 133.333 362.936 133.333 358.334V341.667Z"
          fill="#FF6E04"
        />
        <path
          d="M266.667 341.666C266.667 355.473 255.474 366.666 241.667 366.666C227.86 366.666 216.667 355.473 216.667 341.666C216.667 327.859 227.86 316.666 241.667 316.666C255.474 316.666 266.667 327.859 266.667 341.666Z"
          fill="#FF6E04"
        />
      </svg>
    ),
  },
  {
    title: "Jobs",
    link: "/jobs-listings",
    icon: (
      <svg
        width="24"
        height="23"
        viewBox="0 0 667 692"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          fill-rule="evenodd"
          clip-rule="evenodd"
          d="M335.067 3.8363e-05H331.6C301.65 -0.000961637 276.677 -0.00162721 256.851 2.66371C235.924 5.47737 217.031 11.6664 201.849 26.8487C186.666 42.031 180.477 60.9244 177.664 81.8507C174.998 101.677 174.999 126.65 175 156.6V159.191C107.627 161.395 67.1703 169.268 39.0523 197.386C3.97364e-06 236.438 0 299.293 0 425C0 550.707 3.97364e-06 613.563 39.0523 652.613C78.105 691.667 140.959 691.667 266.667 691.667H400C525.707 691.667 588.563 691.667 627.613 652.613C666.667 613.563 666.667 550.707 666.667 425C666.667 299.293 666.667 236.438 627.613 197.386C599.497 169.268 559.04 161.395 491.667 159.191V156.6C491.667 126.651 491.67 101.677 489.003 81.8507C486.19 60.9244 480 42.031 464.817 26.8487C449.637 11.6664 430.743 5.47737 409.817 2.66371C389.99 -0.00162721 365.017 -0.000961637 335.067 3.8363e-05ZM441.667 158.396V158.333C441.667 126.2 441.613 104.614 439.45 88.5134C437.38 73.131 433.807 66.548 429.463 62.204C425.12 57.86 418.537 54.286 403.153 52.218C387.053 50.0534 365.467 50 333.333 50C301.2 50 279.613 50.0534 263.513 52.218C248.131 54.286 241.548 57.86 237.204 62.204C232.86 66.548 229.286 73.131 227.218 88.5134C225.053 104.614 225 126.2 225 158.333V158.396C238.068 158.333 251.936 158.333 266.667 158.333H400C414.73 158.333 428.6 158.333 441.667 158.396ZM500 258.333C500 276.743 485.077 291.667 466.667 291.667C448.257 291.667 433.333 276.743 433.333 258.333C433.333 239.924 448.257 225 466.667 225C485.077 225 500 239.924 500 258.333ZM200 291.667C218.409 291.667 233.333 276.743 233.333 258.333C233.333 239.924 218.409 225 200 225C181.591 225 166.667 239.924 166.667 258.333C166.667 276.743 181.591 291.667 200 291.667Z"
          fill="#FF6E04"
        />
      </svg>
    ),
  },
  {
    title: "Properties",
    link: "/listings/to-let",
    icon: (
      <svg
        width="25"
        height="22"
        viewBox="0 0 783 800"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          d="M756.522 747.827H678.261V52.1734H704.348C718.75 52.1734 730.436 40.4969 730.436 26.0859C730.434 11.6766 718.75 0 704.348 0C495.075 0 286.131 0 78.2609 0C63.8594 0 52.1734 11.6766 52.1734 26.0875C52.1734 40.4984 63.8594 52.175 78.2609 52.175H104.348V747.827H26.0875C11.6859 747.827 0 759.503 0 773.914C0 788.325 11.6859 800.002 26.0875 800.002C270.544 800.002 513.405 800.002 756.522 800.002C770.923 800.002 782.609 788.325 782.609 773.914C782.609 759.503 770.923 747.827 756.522 747.827ZM365.217 669.566C365.217 683.977 353.531 695.653 339.13 695.653H234.781C220.38 695.653 208.694 683.977 208.694 669.566V565.217C208.694 550.806 220.38 539.13 234.781 539.13H339.13C353.531 539.13 365.217 550.806 365.217 565.217V669.566ZM365.217 460.87C365.217 475.281 353.531 486.958 339.13 486.958H234.781C220.38 486.958 208.694 475.281 208.694 460.87V356.522C208.694 342.111 220.38 330.434 234.781 330.434H339.13C353.531 330.434 365.217 342.111 365.217 356.522V460.87ZM365.217 252.173C365.217 266.584 353.531 278.261 339.13 278.261H234.781C220.38 278.261 208.694 266.584 208.694 252.173V147.827C208.694 133.416 220.38 121.739 234.781 121.739H339.13C353.531 121.739 365.217 133.416 365.217 147.827V252.173ZM573.914 669.566C573.914 683.977 562.228 695.653 547.827 695.653H443.478C429.077 695.653 417.391 683.977 417.391 669.566V565.217C417.391 550.806 429.077 539.13 443.478 539.13H547.827C562.228 539.13 573.914 550.806 573.914 565.217V669.566ZM573.914 460.87C573.914 475.281 562.228 486.958 547.827 486.958H443.478C429.077 486.958 417.391 475.281 417.391 460.87V356.522C417.391 342.111 429.077 330.434 443.478 330.434H547.827C562.228 330.434 573.914 342.111 573.914 356.522V460.87ZM573.914 252.173C573.914 266.584 562.228 278.261 547.827 278.261H443.478C429.077 278.261 417.391 266.584 417.391 252.173V147.827C417.391 133.416 429.077 121.739 443.478 121.739H547.827C562.228 121.739 573.914 133.416 573.914 147.827V252.173Z"
          fill="#FF6E04"
        />
      </svg>
    ),
  },
];

const MobileFooter = () => {
  const [loginPop, setLoginPop] = useState(false);
  const router = useRouter();

  const handleProtectedRoute = (link) => {
    if (typeof window === "undefined") return;

    if (link === "/dashboard") {
      const token = localStorage.getItem("authToken");

      if (token) {
        router.push("/dashboard");
      } else {
        setLoginPop(true); // open login popup
      }
    } else {
      router.push(link);
    }
  };

  return (
    <>
      <section className="w-full z-30 bg-white border-t-2 border-gray-200 h-20 md:hidden fixed whitespace-nowrap bottom-[-15px]">
        <div className="flex items-center justify-around pt-3">
          {mobileFooterData.map((item, index) => {
            const isActive = router.pathname === item?.link;

            return (
              <div
                key={index}
                onClick={() => handleProtectedRoute(item.link)}
                className={`
    flex flex-col items-center scale-110 text-xs font-bold transition-all cursor-pointer
    ${isActive ? "opacity-100" : "opacity-100"}
  `}
              >
                <div
                  className={`${
                    isActive ? "text-black" : "text-gray-400"
                  } scale-80`}
                >
                  {item?.icon}
                </div>

                <p
                  className={`text-[9px] px-1 ${
                    isActive ? "text-black" : "text-gray-400"
                  }`}
                >
                  {item?.title}
                </p>
              </div>
            );
          })}
        </div>
      </section>
      {loginPop && (
        <div className="h-screen w-full top-0 flex md:hidden fixed inset-0 z-50 bg-white">
          <div className="mt-2 relative w-full ">
            <button
              onClick={() => setLoginPop(false)}
              className="absolute right-3 border rounded-full border-orange-500 p-2 top-2 z-50 text-[#FF6E04]"
            >
              âœ•
            </button>

            <Login />
          </div>
        </div>
      )}
    </>
  );
};

export default MobileFooter;
