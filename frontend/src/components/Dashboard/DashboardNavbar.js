import { useAuth } from "@/context/AuthContext";
import { useRouter } from "next/router";
import React, { useState } from "react";

const DashboardNavbar = ({ setPostAdd }) => {
  const [logPop, setLogPop] = useState(false);
    const router = useRouter();
  const { setToken } = useAuth();

  const navItems = [
    {
      label: "Post Your Ads",
      handleState: () => setPostAdd(true),
      icon: (
        <svg
          id="Layer_1"
          viewBox="0 0 512 512"
          height="32"
          width="32"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path d="m452.53.01h-393.06c-21.96 0-39.83 17.85-39.83 39.8v363.43c0 21.94 17.87 39.8 39.83 39.8h237.35l-1.4 17.52c-.56 6.58 2.75 12.6 8.65 15.72 5.76 3.02 12.75 2.3 17.81-1.83l35.93-29.38c.03-.02.05-.04.06-.05.02 0 .06.01.1.01.07.01.11.02.13.03.01.02.04.05.07.11l33.91 58.75c3.01 5.18 8.47 8.09 14.09 8.09 2.76 0 5.55-.7 8.1-2.17l31.62-18.26c7.72-4.48 10.38-14.42 5.92-22.17l-15.22-26.36h15.92c21.96 0 39.83-17.85 39.83-39.8v-363.44c.01-21.95-17.85-39.8-39.81-39.8zm-393.06 15.98h393.05c13.14 0 23.84 10.68 23.84 23.81v37.64h-440.73v-37.63c0-13.13 10.7-23.82 23.84-23.82zm378.43 461.73-31.6 18.25c-.13.07-.32.01-.37-.07l-33.88-58.7c-2.4-4.21-6.37-7.01-11.16-7.89-1.01-.19-2.03-.28-3.03-.28-3.7 0-7.24 1.27-10.17 3.68l-35.9 29.36c-.09.08-.15.09-.16.1-.01 0-.05-.01-.1-.03-.11-.06-.16-.11-.16-.11 0-.01-.01-.05 0-.15l11.65-146.18c.01-.07.01-.12.01-.13.02-.02.06-.04.12-.08.07-.04.11-.05.11-.06.02 0 .06.02.11.04l132.38 62.96c.11.06.17.1.17.11 0 0 .02.04.01.22 0 .06-.01.09-.01.1-.02.01-.06.04-.13.07l-43.44 16.43c-4.48 1.73-7.85 5.17-9.49 9.7s-1.21 9.35 1.2 13.57c0 .01.01.02.02.03l33.9 58.73c.06.12 0 .28-.08.33zm14.63-50.67h-25.15l-9.44-16.36c-.04-.06-.06-.11-.07-.12 0-.02.01-.04.02-.08.03-.09.06-.14.06-.15.02-.01.05-.03.1-.05l43.4-16.41c6.13-2.32 10.24-8.04 10.46-14.51.28-6.57-3.24-12.44-9.23-15.35l-132.46-63c-4.89-2.31-10.38-2.08-15.02.59-4.72 2.69-7.68 7.35-8.12 12.8l-8.98 112.63h-238.63c-13.14 0-23.84-10.68-23.84-23.81v-309.79h440.73v309.8c.01 13.12-10.69 23.81-23.83 23.81zm-365.3-360.43c10.97 0 19.9-8.93 19.9-19.9s-8.93-19.9-19.9-19.9c-10.99 0-19.93 8.93-19.93 19.9s8.94 19.9 19.93 19.9zm0-23.81c2.12 0 3.91 1.79 3.91 3.91 0 2.16-1.75 3.91-3.91 3.91-2.17 0-3.94-1.75-3.94-3.91s1.76-3.91 3.94-3.91zm46.14 23.81c10.99 0 19.93-8.93 19.93-19.9s-8.94-19.9-19.93-19.9c-10.97 0-19.9 8.93-19.9 19.9s8.93 19.9 19.9 19.9zm0-23.81c2.17 0 3.94 1.75 3.94 3.91s-1.77 3.91-3.94 3.91c-2.16 0-3.91-1.75-3.91-3.91 0-2.12 1.79-3.91 3.91-3.91zm46.18 23.81c10.97 0 19.9-8.93 19.9-19.9s-8.93-19.9-19.9-19.9-19.9 8.93-19.9 19.9 8.93 19.9 19.9 19.9zm0-23.81c2.12 0 3.91 1.79 3.91 3.91 0 2.16-1.75 3.91-3.91 3.91s-3.91-1.75-3.91-3.91 1.75-3.91 3.91-3.91zm43.14 3.91c0-4.42 3.58-7.99 7.99-7.99h205.99c4.42 0 7.99 3.58 7.99 7.99s-3.58 7.99-7.99 7.99h-205.98c-4.42.01-8-3.57-8-7.99zm33.31 82.57h-37.45c-4.42 0-7.99 3.58-7.99 7.99v125.41c0 4.41 3.58 7.99 7.99 7.99h37.45c25.04 0 45.41-20.37 45.41-45.41v-50.57c0-25.03-20.37-45.41-45.41-45.41zm29.42 95.99c0 16.22-13.2 29.42-29.42 29.42h-29.45v-109.42h29.45c16.22 0 29.42 13.2 29.42 29.42zm-188.75 45.41c4.42 0 7.99-3.58 7.99-7.99v-54.71h58.87v54.71c0 4.41 3.58 7.99 7.99 7.99s7.99-3.58 7.99-7.99v-87.99c0-25.04-20.37-45.41-45.41-45.41-25.05 0-45.44 20.37-45.44 45.41v87.99c.01 4.41 3.59 7.99 8.01 7.99zm37.44-125.41c16.22 0 29.42 13.2 29.42 29.42v17.3h-58.87v-17.29c0-16.23 13.21-29.43 29.45-29.43zm214.36 23.36c0 12.88 10.48 23.36 23.36 23.36h12.16c21.7 0 39.35 17.65 39.35 39.34s-17.65 39.35-39.35 39.35h-12.16c-21.7 0-39.35-17.65-39.35-39.35 0-4.42 3.58-7.99 7.99-7.99s7.99 3.58 7.99 7.99c0 12.88 10.48 23.36 23.36 23.36h12.16c12.88 0 23.36-10.48 23.36-23.36s-10.48-23.36-23.36-23.36h-12.16c-21.7 0-39.35-17.65-39.35-39.34s17.65-39.35 39.35-39.35h12.16c21.7 0 39.35 17.65 39.35 39.35 0 4.42-3.58 7.99-7.99 7.99s-7.99-3.58-7.99-7.99c0-12.88-10.48-23.36-23.36-23.36h-12.16c-12.89 0-23.36 10.48-23.36 23.36zm-84.48 149.58c0 4.41-3.58 7.99-7.99 7.99h-159.33c-4.42 0-7.99-3.58-7.99-7.99s3.58-7.99 7.99-7.99h159.33c4.42 0 7.99 3.58 7.99 7.99zm0 65c0 4.41-3.58 7.99-7.99 7.99h-159.33c-4.42 0-7.99-3.58-7.99-7.99s3.58-7.99 7.99-7.99h159.33c4.42 0 7.99 3.58 7.99 7.99z" />
        </svg>
      ),
    },
    {
      label: "Real Estate",
      icon: (
        <svg
          width="35"
          height="33"
          viewBox="0 0 35 33"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M33.0841 31.9999H1.00391"
            stroke="black"
            stroke-width="2"
            stroke-linecap="round"
          />
          <path
            d="M1.00391 14.3559L7.52093 9.14234M33.0841 14.3559L20.0501 3.92873C18.2925 2.52278 15.7954 2.52278 14.0379 3.92873L12.7837 4.93211"
            stroke="black"
            stroke-width="2"
            stroke-linecap="round"
          />
          <path
            d="M22.6582 5.53382V2.32581C22.6582 1.88288 23.0173 1.5238 23.4602 1.5238H27.4702C27.9131 1.5238 28.2722 1.88288 28.2722 2.32581V10.3458"
            stroke="black"
            stroke-width="2"
            stroke-linecap="round"
          />
          <path
            d="M4.21094 32V11.95"
            stroke="black"
            stroke-width="2"
            stroke-linecap="round"
          />
          <path
            d="M29.873 11.95V18.366M29.873 32V24.782"
            stroke="black"
            stroke-width="2"
            stroke-linecap="round"
          />
          <path
            d="M21.8506 31.9999V23.9799C21.8506 21.7115 21.8506 20.5773 21.146 19.8725C20.4412 19.1678 19.307 19.1678 17.0386 19.1678C14.7702 19.1678 13.636 19.1678 12.9313 19.8725M12.2266 31.9999V23.9799"
            stroke="black"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
          />
          <path
            d="M20.2461 11.9501C20.2461 13.7219 18.8099 15.1581 17.0381 15.1581C15.2663 15.1581 13.8301 13.7219 13.8301 11.9501C13.8301 10.1783 15.2663 8.74207 17.0381 8.74207C18.8099 8.74207 20.2461 10.1783 20.2461 11.9501Z"
            stroke="black"
            stroke-width="2"
          />
        </svg>
      ),
    },
    {
      label: "Notifications",
      hasNotification: true,
      icon: (
        <svg
          width="31"
          height="37"
          viewBox="0 0 31 37"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M14.8714 1.1897C13.314 1.1897 12.0387 2.47514 12.0387 4.045C12.0387 4.41306 12.1106 4.76998 12.2379 5.09343C8.25449 6.13628 5.66528 9.62454 5.66528 14.0385C5.66528 19.6292 4.30428 22.175 3.00968 23.6083C2.36238 24.3249 1.72337 24.7599 1.17289 25.1698C0.896265 25.3733 0.644536 25.5769 0.42047 25.839C0.196404 26.1011 0 26.4747 0 26.8874C0 27.8689 0.59751 28.7026 1.43845 29.2519C2.27939 29.8013 3.38312 30.1554 4.71369 30.4342C6.43983 30.7939 8.56984 30.9835 10.9101 31.0811C10.733 31.5551 10.6224 32.0654 10.6224 32.598C10.6224 34.9542 12.5339 36.8809 14.8714 36.8809C17.2088 36.8809 19.1203 34.9542 19.1203 32.598C19.1203 32.0626 19.0124 31.5524 18.8326 31.0811C21.1729 30.9835 23.3029 30.7939 25.029 30.4342C26.3596 30.1554 27.4633 29.8013 28.3043 29.2519C29.1452 28.7026 29.7427 27.8689 29.7427 26.8874C29.7427 26.4747 29.5463 26.1011 29.3222 25.839C29.0982 25.5769 28.8464 25.3733 28.5698 25.1698C28.0193 24.7599 27.3803 24.3249 26.733 23.6083C25.4384 22.175 24.0774 19.6292 24.0774 14.0385C24.0774 9.62733 21.4827 6.14186 17.5048 5.09343C17.6321 4.76998 17.704 4.41306 17.704 4.045C17.704 2.47514 16.4288 1.1897 14.8714 1.1897ZM14.8714 2.61735C15.6625 2.61735 16.2877 3.24752 16.2877 4.045C16.2877 4.84247 15.6625 5.47265 14.8714 5.47265C14.0802 5.47265 13.455 4.84247 13.455 4.045C13.455 3.24752 14.0802 2.61735 14.8714 2.61735ZM16.5311 6.32031C20.307 6.99789 22.6611 9.93963 22.6611 14.0385C22.6611 19.869 24.1328 22.8638 25.6708 24.5675C26.4398 25.4179 27.2171 25.9505 27.7289 26.3297C27.9834 26.5193 28.1742 26.6783 28.26 26.7759C28.3457 26.8735 28.3264 26.8651 28.3264 26.8874C28.3264 27.3335 28.1217 27.6598 27.5297 28.0474C26.9377 28.4349 25.9751 28.7946 24.7413 29.0512C22.2738 29.567 18.7607 29.7427 14.8714 29.7427C10.982 29.7427 7.46887 29.567 5.00138 29.0512C3.76763 28.7946 2.80498 28.4349 2.213 28.0474C1.62102 27.6598 1.41632 27.3335 1.41632 26.8874C1.41632 26.8651 1.39696 26.8735 1.48271 26.7759C1.56846 26.6783 1.75933 26.5193 2.01383 26.3297C2.52558 25.9505 3.3029 25.4179 4.07192 24.5675C5.60995 22.8638 7.0816 19.869 7.0816 14.0385C7.0816 9.94242 9.43844 7.02299 13.2116 6.34262C13.6819 6.69117 14.2489 6.9003 14.8714 6.9003C15.4993 6.9003 16.0608 6.67444 16.5311 6.32031ZM12.4371 31.1257C13.231 31.1425 14.0387 31.1703 14.8714 31.1703C15.704 31.1703 16.5117 31.1425 17.3057 31.1257C17.5574 31.5551 17.704 32.0626 17.704 32.598C17.704 34.1846 16.4453 35.4533 14.8714 35.4533C13.2974 35.4533 12.0387 34.1846 12.0387 32.598C12.0387 32.057 12.1798 31.5551 12.4371 31.1257Z"
            fill="black"
          />
          <circle cx="22.6033" cy="8.32796" r="8.32796" fill="#E00613" />
          <path
            d="M24.697 8.007C25.1297 8.13167 25.467 8.359 25.709 8.689C25.9583 9.019 26.083 9.41867 26.083 9.888C26.083 10.3353 25.962 10.724 25.72 11.054C25.478 11.384 25.1333 11.6407 24.686 11.824C24.246 12 23.729 12.088 23.135 12.088C22.6583 12.088 22.2 12.0257 21.76 11.901C21.32 11.769 20.9387 11.582 20.616 11.34C20.4913 11.2447 20.4033 11.1457 20.352 11.043C20.3007 10.933 20.275 10.8047 20.275 10.658C20.275 10.4307 20.3373 10.24 20.462 10.086C20.5867 9.92467 20.7407 9.844 20.924 9.844C21.0267 9.844 21.1183 9.86233 21.199 9.899C21.2797 9.92833 21.3897 9.97967 21.529 10.053C21.5583 10.0677 21.5913 10.086 21.628 10.108C21.672 10.1227 21.7197 10.141 21.771 10.163C22.0057 10.2803 22.2147 10.372 22.398 10.438C22.5887 10.4967 22.8013 10.526 23.036 10.526C23.4467 10.526 23.74 10.46 23.916 10.328C24.0993 10.196 24.191 9.976 24.191 9.668C24.191 9.382 24.0993 9.17667 23.916 9.052C23.7327 8.92733 23.432 8.865 23.014 8.865H22.332C22.112 8.865 21.9397 8.788 21.815 8.634C21.6903 8.48 21.628 8.29667 21.628 8.084C21.628 7.87133 21.6903 7.688 21.815 7.534C21.9397 7.38 22.112 7.303 22.332 7.303H22.816C23.2193 7.303 23.5127 7.24433 23.696 7.127C23.8793 7.00967 23.971 6.82267 23.971 6.566C23.971 6.29467 23.8903 6.08567 23.729 5.939C23.5677 5.785 23.344 5.708 23.058 5.708C22.8527 5.708 22.6583 5.741 22.475 5.807C22.299 5.873 22.101 5.961 21.881 6.071L21.65 6.181C21.5107 6.25433 21.4007 6.30933 21.32 6.346C21.2393 6.37533 21.1477 6.39 21.045 6.39C20.8617 6.39 20.7077 6.313 20.583 6.159C20.4583 5.99767 20.396 5.80333 20.396 5.576C20.396 5.422 20.4217 5.29367 20.473 5.191C20.5243 5.08833 20.6123 4.98933 20.737 4.894C21.0523 4.65933 21.4227 4.476 21.848 4.344C22.2807 4.212 22.717 4.146 23.157 4.146C23.6997 4.146 24.1763 4.234 24.587 4.41C25.005 4.586 25.324 4.83533 25.544 5.158C25.7713 5.48067 25.885 5.85467 25.885 6.28C25.885 6.68333 25.7787 7.039 25.566 7.347C25.3607 7.64767 25.071 7.86767 24.697 8.007Z"
            fill="#FFFDFD"
          />
        </svg>
      ),
    },
    {
      label: "Learn to Grow",
      icon: (
        <svg
          width="37"
          height="32"
          viewBox="0 0 37 32"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M36.556 6.23418L28.189 0.111966C28.0511 0.0104356 27.8751 -0.0243453 27.709 0.01709L17.6577 2.5666C17.35 2.64501 17.1641 2.95797 17.2426 3.26558C17.2754 3.39455 17.352 3.50816 17.4593 3.58691L20.1209 5.52992L19.546 8.44439C19.2327 10.0712 21.8454 12.6466 25.3664 13.3306C25.9839 13.4498 26.6114 13.5095 27.2403 13.5088C28.2045 13.5149 29.1635 13.3654 30.0801 13.0662C31.4885 12.5977 32.4283 11.8159 32.5922 10.9795L33.1671 8.0736L36.3604 7.26595C36.6681 7.18754 36.8539 6.87458 36.7755 6.56697C36.7426 6.438 36.666 6.32439 36.5587 6.24564L36.556 6.23418ZM31.4714 10.7583C31.4052 11.0945 30.7816 11.6205 29.7209 11.9741C28.3817 12.3933 26.9587 12.4704 25.582 12.1983C22.3484 11.5688 20.5434 9.38149 20.6958 8.66295L21.1585 6.28021L25.8263 9.70631C25.9246 9.77876 26.0434 9.818 26.1655 9.81841C26.2141 9.81875 26.2626 9.81196 26.3092 9.79831L31.9313 8.37558L31.4714 10.7583ZM26.2977 8.6198L19.1264 3.37713L27.7291 1.19841L34.8917 6.4382L26.2977 8.6198Z"
            fill="black"
          />
          <path
            d="M14.055 13.6181C13.8791 13.7197 13.7698 13.9065 13.7676 14.1097V24.365C13.7698 24.5681 13.8791 24.7549 14.055 24.8565C14.1415 24.91 14.2409 24.9388 14.3425 24.9399C14.4353 24.9407 14.5271 24.919 14.6097 24.8766L24.411 19.746C24.692 19.5982 24.7999 19.2506 24.652 18.9697C24.5979 18.8668 24.5138 18.7827 24.411 18.7286L14.6184 13.598C14.44 13.5059 14.2265 13.5135 14.055 13.6181ZM14.9173 15.0553L22.9049 19.2373L14.926 23.4164L14.9173 15.0553Z"
            fill="black"
          />
          <path
            d="M35.066 28.1475H32.1141C32.1652 27.9867 32.1914 27.819 32.1917 27.6503V14.351C32.1917 14.0335 31.9343 13.7762 31.6168 13.7762C31.2994 13.7762 31.042 14.0335 31.042 14.351V27.6502C31.0372 27.9296 30.8069 28.1522 30.5276 28.1474C30.5275 28.1474 30.5275 28.1474 30.5274 28.1474H5.11329C4.83394 28.1522 4.60358 27.9297 4.59878 27.6504C4.59878 27.6503 4.59878 27.6503 4.59878 27.6502V10.2494C4.60351 9.97007 4.83381 9.74746 5.11315 9.75219H5.11329H17.8204C18.1379 9.75219 18.3953 9.4948 18.3953 9.17731C18.3953 8.85982 18.1379 8.60243 17.8204 8.60243H5.11329C4.19959 8.59927 3.4554 9.33571 3.44908 10.2493V27.6501C3.44943 27.8189 3.47556 27.9866 3.52667 28.1474H0.574882C0.257393 28.1474 0 28.4048 0 28.7223V28.866C0 30.1594 1.0175 31.5965 2.38274 31.5965H33.2581C34.6233 31.5965 35.6408 30.1594 35.6408 28.866V28.7223C35.6408 28.4049 35.3834 28.1475 35.066 28.1475ZM33.2581 30.4469H2.38274C1.88552 30.4469 1.37965 29.918 1.21006 29.2972H34.4307C34.2612 29.918 33.7553 30.4469 33.2581 30.4469Z"
            fill="black"
          />
        </svg>
      ),
    },
  ];

  const handleLogout = () => {
    router.push("/");
    setToken(null);
    localStorage.removeItem("authToken");
  };

  const { user } = useAuth();
  // console.log("user from navbar", user?.user?.name);
  return (
    <nav className="bg-white h-[78px] pr-10 pl-5 py-3 z-[1] fixed w-[82.5%] max-md:hidden rounded-bl-xl shadow-sm  top-0 right-0">
      <div className="max-w-7xl mx-auto flex items-center justify-between">
        {/* Logo */}
        <div className="flex items-center">
          <div className="text-orange-500 font-bold text-xl">
            Address<span className="text-gray-800">Guru</span>
          </div>
        </div>

        {/* Navigation Items */}
        <div className="flex items-center space-x-8">
          {navItems.map((item, index) => (
            <div
              onClick={() => item?.handleState && item?.handleState()}
              key={index}
              className="flex flex-col items-center cursor-pointer hover:text-orange-500 transition-colors"
            >
              {/* Icon placeholder with notification badge */}
              <div className="relative mb-1">
                <span className=" ">{item?.icon}</span>
                {item?.hasNotification && (
                  <div className="absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full"></div>
                )}
              </div>
              {/* Label */}
              <span className="text-xs text-gray-700 font-medium">
                {item?.label}
              </span>
            </div>
          ))}

          {/* Profile Menu */}
          <div className="flex flex-col items-center cursor-pointer relative hover:text-orange-500 transition-colors">
            <div
              onClick={() => setLogPop(!logPop)}
              className="w-8 h-8 bg-orange-500 rounded-full flex items-center justify-center mb-1"
            >
              <span className="text-white font-medium text-sm">
                {user?.user?.name?.slice(0, 1)}
              </span>
            </div>
            <span className="text-xs text-gray-700 font-medium">
              {user?.user?.name}
            </span>
            {logPop && (
              <div className=" w-40 py-3 bg-white shadow-xl absolute top-17 rounded-lg flex flex-col items-center justify-center gap-3">
                <p className="text-black font-semibold">Welcome</p>
                <button
                  className="px-4 py-1 bg-red-500 text-white rounded-md hover:bg-red-600 transition"
                  onClick={handleLogout}
                >
                  Logout
                </button>
              </div>
            )}
          </div>
        </div>
      </div>
    </nav>
  );
};

export default DashboardNavbar;
